function playInTimeline(e,t=0){soulmagics[e].users[t].timelineInstances[0].restart()}function playOutTimeline(e,t=0){soulmagics[e].users[t].timelineInstances[1].restart()}!function(){const e=gsap.utils.checkPrefix("filter"),t=/blur\((.+)?px\)/,n=n=>(gsap.getProperty(n,e)||"").match(t)||[];gsap.registerPlugin({name:"blur",get:e=>+n(e)[1]||0,init(t,s){let r,i=gsap.getProperty(t,e),o="blur("+s+"px)",a=n(t)[0];"none"===i&&(i=""),a?(r=i.indexOf(a),s=i.substr(0,r)+o+i.substr(r+a.length)):(s=i+o,i+=i?" blur(0px)":"blur(0px)"),this.target=t,this.interp=gsap.utils.interpolate(i,s)},render(t,n){n.target.style[e]=n.interp(t)}})}(),gsap.registerPlugin(ScrollTrigger),gsap.registerPlugin(DrawSVGPlugin),ScrollTrigger.defaults({toggleActions:"play none none none"}),jQuery((function(e){window.soulmagics={},e("html").addClass("soulmagic-active");const t=function(t){return{triggerInstance:null,timelineInstances:[],setInstances:[],splitInstances:[],clicker:null,hoverer:null,element:e(t)}},n=function(e,t){return t.splits.some((t=>t.refs.includes(e.targets)))},s=function(t,s,r){if(n(t,r)){const[e,n]=t.targets.split(".");return s.splitInstances[e][n]}const i=t.scope?e(t.scope):s.element,o=e(i).find(t.targets);return t.attr?e(o.attr(t.attr)):t.not?o.not(t.not):t.parentnext?o.parents(t.parentnext).next():o},r=function(t,n=!0){if(t.attr("vars"))return JSON.parse(t.attr("vars"));const s=t.children();return s.length?Object.fromEntries(s.map((function(){const t=e(this);let s=t.prop("tagName").toLowerCase();return n&&(s=s.replace(/(-[a-z])/g,(e=>e.toUpperCase().replace("-",""))),s=s.replace(/(Svg|3d)$/g,(e=>e.toUpperCase()))),[[s,r(t,n&&"attr"!==s)]]})).get()):function(e,t=!1){if(t||!e)return e;if("true"===e||"false"===e)return"true"===e;const n=parseFloat(e);return isNaN(n)||e.length!==(n+"").length?e:n}(t.text(),!n)},i=function(){const t=e(this),n=t.find("event"),s=r(n)||{},i={type:n.attr("type")||"scroll",trigger:n.attr("trigger"),away:n.attr("away"),closer:n.attr("closer"),vars:{start:"top center",...s}};return{name:t.attr("id"),media:t.attr("media")||"all",sets:(l=t.find("set"),l.map((function(){const t=e(this),n=r(t);return n.onComplete=g,{targets:t.attr("targets"),attr:t.attr("attr"),parentnext:t.attr("parentnext"),not:t.attr("not"),vars:n,scope:t.attr("scope")}})).get()),event:i,splits:(a=t.find("split"),a.map((function(){const t=e(this),n=r(t),s=t.attr("name"),i=(n.type||"chars,words,lines").split(",").map((e=>s+"."+e.trim()));return{name:s,targets:t.attr("targets"),vars:n,refs:i}})).get()),timelines:(o=t.find("timeline"),o.map((function(){return{steps:(t=e(this).children(),t.map((function(){const t=e(this);return{tag:t.prop("tagName").toLowerCase(),targets:t.attr("targets"),attr:t.attr("attr"),parentnext:t.attr("parentnext"),not:t.attr("not"),vars:r(t),position:t.attr("position")||"=0",scope:t.attr("scope")}})).get())};var t})).get()),users:t.attr("users")||[]};var o,a,l},o=function(e,t){return e.timeScale(1).play().then((()=>t&&t.seek(0).pause()))},a=function(e,t){return e&&e.progress()>0&&(!t||[0,1].includes(t.progress()))},l=function(e){return e.timeScale(2).reverse().then((()=>e.timeScale(1).seek(0).pause()))},c=function(e,t){const[n,s]=e.timelineInstances;if(0===n.progress())return console.log("opening!"),void o(n,s);a(s,n)&&(console.log("canceling the close!"),setTimeout((()=>l(s)),t))},u=function(e,t){const[n,s]=e.timelineInstances;if(1===n.progress()&&s&&0===s.progress())return console.log("closing!"),void setTimeout((()=>o(s,n)),t);a(n,s)&&(console.log("canceling the open!"),l(n))},g=function(){this.targets().forEach((t=>e(t).removeClass("sm-curtain")))},d=function(e){Object.values(window.soulmagics).forEach((function(t){t.media===e&&(m(t),p(t),f(t))}))},m=function(e){e.users.forEach((function(t){e.splits.forEach((function(n){const r=s(n,t,e);t.splitInstances[n.name]=new SplitText(r,n.vars)}))}))},p=function(e){e.users.forEach((function(t){e.sets.forEach((function(n){const r=s(n,t,e);r.length&&t.setInstances.push(gsap.set(r,n.vars))})),e.timelines.forEach((function(r){const i=gsap.timeline({paused:!0});r.steps.forEach((function(r){const o=s(r,t,e);if(n(r,e)){const e=t.splitInstances[r.targets.split(".")[0]];e.vars.revertOnComplete&&(r.vars.onComplete=()=>e.revert())}o.length&&i.add(gsap[r.tag](o,r.vars),r.position)})),t.timelineInstances.push(i)}))}))},f=function(t){t.users.forEach((function(n){if("scroll"!==t.event.type)return"click"===t.event.type?(n.trigger=n.element.find(t.event.trigger).on("click.soulmagic",(function(){console.log("click!"),c(n,0),u(n,0)})),void e(document).on("click.soulmagic",(function(s){const r=e(s.target),i="this"===t.event.away?n.element:n.element.find(t.event.away);console.log("thisClickAway: ",i),"false"===t.event.away||i.is(r)||i.has(r).length||n.trigger.has(r).length||(console.log("1."+t.event.away),console.log("2."+i.is(r)),console.log("3."+i.has(r).length),console.log("4."+n.trigger.has(r).length),u(n,0));n.element.find(t.event.closer).is(r)&&u(n,0)}))):void("hover"===t.event.type&&(n.trigger="this"===t.event.trigger?n.element:n.element.find(t.event.trigger),n.trigger.on("mouseenter.soulmagic, touchstart.soulmagic",(function(){c(n,0)})),n.trigger.on("mouseleave.soulmagic, touchend.soulmagic",(function(){u(n,0)}))));n.scrollTriggerInstance=ScrollTrigger.create({trigger:n.element,animation:n.timelineInstances[0],...t.event.vars})}))};window.nuke=function(){Object.values(window.soulmagics).forEach((t=>{t.users.forEach((n=>{"scroll"===t.event.type&&n.scrollTriggerInstance.kill(),n.timelineInstances.forEach((e=>e.kill())),n.setInstances.forEach((e=>e.kill())),Object.values(n.splitInstances).forEach((e=>e.revert())),n.trigger&&n.trigger.off(".soulmagic"),e(document).off(".soulmagic")}))}))},window.preflight=function(){const t=e("soulmagic"),n=t.map(i).get().map((e=>[e.name,e]));window.soulmagics=Object.fromEntries(n);const s=r(t.find("defaults"))||{};gsap.defaults({ease:"power3.out",duration:.7,...s})},window.indexUsers=function(){Object.values(window.soulmagics).forEach((n=>{n.users=e(n.users).map((function(){return t(this)})).get()}));e('[class*="soulmagic-"]').filter((function(){const t=[...this.className.matchAll(/soulmagic-(?<name>[_a-zA-Z0-9-]+)/g)].map((e=>e.groups.name)).filter((e=>e&&window.soulmagics[e]));return!!t.length&&(e(this).data("soulmagic",t),!0)})).each((function(){const n=e(this);n.data("soulmagic").forEach((e=>{window.soulmagics[e].users.push(t(n))}))})),Object.values(window.soulmagics).forEach((e=>{e.users.forEach((t=>t.element.attr("data-soulmagic",e.name)))}))},window.instantiate=function(){ScrollTrigger.matchMedia({"(max-width: 767px)":()=>d("max-w-sm"),"(max-width: 1023px)":()=>d("max-w-md"),"(min-width: 768px)":()=>d("min-w-md"),"(min-width: 1024px)":()=>d("min-w-lg"),all:()=>d("all")})},window.smReset=function(e=!0){e&&window.nuke(),window.preflight(),window.indexUsers(),document.fonts.ready.then(window.instantiate)};const h=function(){e(".fl-builder-edit .fl-builder-bar-spacer").length>0?e(".fl-builder-edit .fl-builder-bar-spacer").prepend('<button class="magic-button" style="padding:0.3rem 1rem;border:1px solid; border-radius:9999px;color:black">Refresh SoulMagic</button><button class="fl-hide-overlays" style="display:inline-flex;align-items:center;margin-left:.5rem;padding:0.3rem 1rem;border:1px solid; border-radius:9999px;color:black"><svg xmlns="http://www.w3.org/2000/svg" style="width:1rem;height:1rem;opacity:.5;margin-right: 0.25rem;" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21" /></svg><span class="hotext">Hide Overlays</span></button>'):e(".fl-builder-edit .fl-builder-bar-actions").append('<button class="fl-hide-overlays" style="display:inline-flex;align-items:center;margin-left:.5rem;padding:0.3rem 1rem;border:1px solid; border-radius:9999px;color:black"><svg xmlns="http://www.w3.org/2000/svg" style="width:1rem;height:1rem;opacity:.5;margin-right: 0.25rem;" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21" /></svg><span class="hotext">Hide Overlays</span></button><button class="magic-button" style="padding:0.3rem 1rem;border:1px solid; border-radius:9999px;color:black">Refresh SoulMagic</button>'),e(document).on("click",".magic-button",window.smReset),window.windowWidthBeforeResize=e(window).width(),e(window).resize(function(e,t=750){let n;return(...s)=>{clearTimeout(n),n=setTimeout((()=>{e.apply(this,s)}),t)}}((function(){const t=e(window).width();Math.abs(t-window.windowWidthBeforeResize)>250&&0==e(".fl-builder-edit").length&&window.smReset()})));var t=!1;e(document).on("click",".fl-hide-overlays",(function(){t=!t,e("body").toggleClass("fl-overlays-hidden"),t?(e(".fl-hide-overlays").find("svg").html('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />'),e(".fl-hide-overlays .hotext").text("Show Overlays")):(e(".fl-hide-overlays").find("svg").html('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21" />'),e(".fl-hide-overlays .hotext").text("Hide Overlays"))})),e("html").hasClass("fl-builder-edit")||window.smReset(!1)};"complete"===document.readyState?h():window.addEventListener("load",h)}));